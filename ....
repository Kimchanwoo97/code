using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using static System.Console;
using static System.Threading.Thread;

namespace ConsoleApp1
{
    class Screen
    {
        public void Comscreen()
        {
            int num = 2;

            SetCursorPosition(18, 1);
            ForegroundColor = ConsoleColor.Red;
            WriteLine("Com Screen");

            for(int i = 0; i < 1; i++)
            {
                for(int j = 1; j <= 10; j++)
                {
                    ForegroundColor = ConsoleColor.Blue;
                    SetCursorPosition(1, num+=2);
                    WriteLine(j);
                }
            }

            ForegroundColor = ConsoleColor.White;
            SetCursorPosition(2, 3);
            WriteLine("┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓");
            for (int i = 0; i < 9; i++)
            {
                SetCursorPosition(2, 4 + i * 2);
                WriteLine("┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃");
                SetCursorPosition(2, 5 + i * 2);
                WriteLine("┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫");
            }
            SetCursorPosition(2, 22);
            WriteLine("┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃");
            SetCursorPosition(2, 23);
            WriteLine("┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛");
        }

        public void Playerscreen()
        {
            int num = 2;

            SetCursorPosition(70, 1);
            ForegroundColor = ConsoleColor.Red;
            WriteLine("Plyer Screen");

            for (int i = 0; i < 1; i++)
            {
                for (int j = 1; j <= 10; j++)
                {
                    ForegroundColor = ConsoleColor.Blue;
                    SetCursorPosition(53, num += 2);
                    WriteLine(j);
                }
            }

            ForegroundColor = ConsoleColor.White;
            SetCursorPosition(54, 3);
            WriteLine("┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓");
            for (int i = 0; i < 9; i++)
            {
                SetCursorPosition(54, 4 + i * 2);
                WriteLine("┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃");
                SetCursorPosition(54, 5 + i * 2);
                WriteLine("┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫");
            }
            SetCursorPosition(54, 22);
            WriteLine("┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃");
            SetCursorPosition(54, 23);
            WriteLine("┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛");
        }
        public void Earlyscreen()
        {
            SetCursorPosition(30, 10);
            WriteLine("┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓");
            for(int i = 0; i < 5; i++)
            {
                SetCursorPosition(30, 11+i);
                WriteLine("┃                                            ┃");
            }
            SetCursorPosition(30, 16);
            WriteLine("┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛");

            SetCursorPosition(48, 12);
            ForegroundColor = ConsoleColor.Red;
            WriteLine("Gmae start");

            ForegroundColor = ConsoleColor.White;
            SetCursorPosition(38, 14);
            WriteLine("Enter를 누르면 게임을 시작합니다.");

           
        }
    }

    class Tast
    {
        public static void Obj(int x, int y, string s)
        {
            SetCursorPosition(x, y);
            WriteLine(s);
        }

        public static void Obj2(int x, int y, int s, int s1, string name)
        {
            SetCursorPosition(x, y);
            WriteLine($"{name}가 ({(s1 - 2) / 2}, {s / 4})칸을 조사 하였습니다.");
        }
        public static void Obj3(int x, int y, int s, int s1, string name)
        {
            SetCursorPosition(x, y);
            WriteLine($"{name}가 ({(s1 - 2) / 2}, {s / 4})에서 적을 찾았습니다.");
        }

        public void Game()
        {
            Screen screen = new Screen();

            Random r = new Random();
            ConsoleKey key;
            bool s = true, s1 = true, s2 = true, s3 = true;

            int mx, my;

            mx = 4;
            my = 4;

            int x, y, x1, y1, x2, y2, x3, y3;
            int px, py, px1, py1, px2, py2, px3, py3;


            #region com xy값           

            while (true)
            {               
                while (true)
                {
                    x = r.Next(4, 41);
                    y = r.Next(5, 23);

                    if (x % 4 == 0 && y % 2 == 0)
                    {
                        break;
                    }
                }

                while (true)
                {
                    x1 = r.Next(4, 41);
                    y1 = r.Next(5, 23);

                    if (x1 % 4 == 0 && y1 % 2 == 0)
                    {
                        break;
                    }
                }

                while (true)
                {
                    x2 = r.Next(4, 41);
                    y2 = r.Next(5, 23);

                    if (x2 % 4 == 0 && y2 % 2 == 0)
                    {
                        break;
                    }
                }

                while (true)
                {
                    x3 = r.Next(4, 41);
                    y3 = r.Next(5, 23);

                    if (x3 % 4 == 0 && y3 % 2 == 0)
                    {
                        break;
                    }
                }

                if (x != x1 && x != x2 && x != x3 && x1 != x2 && x1 != x3 && x2 != x3 &&
                    y != y1 && y != y2 && y != y3 && y1 != y2 && y1 != y3 && y2 != y3)
                {
                    break;
                }
                else
                    continue;
            }
            #endregion

            while (true)
            {
                

                Clear();

                screen.Comscreen();
                screen.Playerscreen();

                if (s)
                {
                    Obj(x, y, "♣");
                }
                if (s1)
                {
                    Obj(x1, y1, "♠");
                }
                if (s2)
                {
                    Obj(x2, y2, "♥");
                }
                if (s3)
                {
                    Obj(x3, y3, "◆");
                }

                ForegroundColor = ConsoleColor.Blue;
                Obj(mx, my, "■");

                ForegroundColor = ConsoleColor.White;
                key = ReadKey(true).Key;

                switch (key)
                {
                    case ConsoleKey.LeftArrow:
                        if (mx > 4) mx -= 4;
                        break;
                    case ConsoleKey.RightArrow:
                        if (mx < 40) mx += 4;
                        break;
                    case ConsoleKey.UpArrow:
                        if (my > 4) my -= 2;
                        break;
                    case ConsoleKey.DownArrow:
                        if (my < 22) my += 2;
                        break;
                    case ConsoleKey.Enter:                       
                        if (mx == x && my == y)
                        {
                            s = false;
                            Obj3(5, 25, mx, my, "player");
                            Sleep(1000);
                        }
                        else if (mx == x1 && my == y1)
                        {
                            s1 = false;
                            Obj3(5, 25, mx, my, "player");
                            Sleep(1000);
                        }
                        else if (mx == x2 && my == y2)
                        {
                            s2 = false;
                            Obj3(5, 25, mx, my, "player");
                            Sleep(1000);
                        }
                        else if (mx == x3 && my == y3)
                        {
                            s3 = false;
                            Obj3(5, 25, mx, my, "player");
                            Sleep(1000);
                        }
                        else
                        {
                            Obj2(5, 25, mx, my, "player");
                            Sleep(1000);
                        }
                        break;
                }
               

                if (!s1 && !s2 && !s3 && !s)
                {
                    SetCursorPosition(7, 25);
                    WriteLine("적의 위치를 전부 찾았습니다 Win");
                    break;
                }
                
            }
        }
    }
    class Program
    {
        static void Main(string[] args)
        {
            ConsoleKey key;
            Tast tast = new Tast();
            Screen screen = new Screen();


            while (true)
            {
                screen.Earlyscreen();
                key = ReadKey(true).Key;
                switch (key)
                {
                    case ConsoleKey.Enter:
                        break;
                    default:
                        return;
                }                

                tast.Game();

                key = ReadKey(true).Key;

                switch (key)
                {
                    case ConsoleKey.NumPad1:
                        continue;
                }
            }

        }
    }
}
