using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using static System.Console;
using static System.Threading.Thread;

namespace ConsoleApp1
{
    class Screen
    {

        public void Comscreen()
        {
            int num = 2, num1 = 0;

            SetCursorPosition(18, 1);
            ForegroundColor = ConsoleColor.Red;
            WriteLine("Com Screen");

            for (int i = 0; i < 1; i++)
            {
                for (int j = 1; j <= 10; j++)
                {
                    ForegroundColor = ConsoleColor.Blue;
                    SetCursorPosition(0, num += 2);
                    WriteLine(j);
                }
            }

            for (int i = 0; i < 1; i++)
            {
                for (int j = 1; j <= 10; j++)
                {
                    ForegroundColor = ConsoleColor.Blue;
                    SetCursorPosition(num1 += 4, 2);
                    Write(j);
                }
            }

            ForegroundColor = ConsoleColor.White;
            SetCursorPosition(2, 3);
            WriteLine("┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓");
            for (int i = 0; i < 9; i++)
            {
                SetCursorPosition(2, 4 + i * 2);
                WriteLine("┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃");
                SetCursorPosition(2, 5 + i * 2);
                WriteLine("┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫");
            }
            SetCursorPosition(2, 22);
            WriteLine("┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃");
            SetCursorPosition(2, 23);
            WriteLine("┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛");
        }

        public void Playerscreen()
        {
            int num = 2, num1 = 52;

            SetCursorPosition(70, 1);
            ForegroundColor = ConsoleColor.Red;
            WriteLine("Plyer Screen");

            for (int i = 0; i < 1; i++)
            {
                for (int j = 1; j <= 10; j++)
                {
                    ForegroundColor = ConsoleColor.Blue;
                    SetCursorPosition(52, num += 2);
                    WriteLine(j);
                }
            }

            for (int i = 0; i < 1; i++)
            {
                for (int j = 1; j <= 10; j++)
                {
                    ForegroundColor = ConsoleColor.Blue;
                    SetCursorPosition(num1 += 4, 2);
                    Write(j);
                }
            }

            ForegroundColor = ConsoleColor.White;
            SetCursorPosition(54, 3);
            WriteLine("┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓");
            for (int i = 0; i < 9; i++)
            {
                SetCursorPosition(54, 4 + i * 2);
                WriteLine("┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃");
                SetCursorPosition(54, 5 + i * 2);
                WriteLine("┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫");
            }
            SetCursorPosition(54, 22);
            WriteLine("┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃");
            SetCursorPosition(54, 23);
            WriteLine("┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛");
        }
        public void Earlyscreen()
        {
            SetCursorPosition(30, 10);
            WriteLine("┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓");
            for (int i = 0; i < 5; i++)
            {
                SetCursorPosition(30, 11 + i);
                WriteLine("┃                                            ┃");
            }
            SetCursorPosition(30, 16);
            WriteLine("┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛");

            SetCursorPosition(48, 12);
            ForegroundColor = ConsoleColor.Red;
            WriteLine("Gmae start");

            ForegroundColor = ConsoleColor.White;
            SetCursorPosition(38, 14);
            WriteLine("Enter를 누르면 게임을 시작합니다.");


        }
    }

    class Tast
    {
        public static void Obj(int x, int y, string s)
        {
            SetCursorPosition(x, y);
            WriteLine(s);
        }

        public static void Obj2(int x, int y, int s, int s1, string name)
        {
            SetCursorPosition(x, y);
            WriteLine($"{name}가 ({(s1 - 2) / 2}, {s / 4})칸을 조사 하였습니다.");
        }
        public static void Obj3(int x, int y, int s, int s1, string name)
        {
            SetCursorPosition(x, y);
            WriteLine($"{name}가 ({(s1 - 2) / 2}, {s / 4})에서 적을 찾았습니다.");
        }
       

        public void Game()
        {
            Screen screen = new Screen();

            Random r = new Random();
            ConsoleKey key;
            bool c = true, c1 = true, c2 = true, c3 = true;
            bool p = true, p1 = true, p2 = true, p3 = true;

            int mx, my;

            mx = 4;
            my = 4;

            int x, y, x1, y1, x2, y2, x3, y3;
            int px, px1, px2, px3, py, py1, py2, py3;

            int fixednum = 52, fixednum1 = 2;
            int i, num;



            #region com xy값           

            while (true)
            {
                while (true)
                {
                    x = r.Next(4, 41);
                    y = r.Next(5, 23);

                    if (x % 4 == 0 && y % 2 == 0)
                    {
                        break;
                    }
                }

                while (true)
                {
                    x1 = r.Next(4, 41);
                    y1 = r.Next(5, 23);

                    if (x1 % 4 == 0 && y1 % 2 == 0)
                    {
                        break;
                    }
                }

                while (true)
                {
                    x2 = r.Next(4, 41);
                    y2 = r.Next(5, 23);

                    if (x2 % 4 == 0 && y2 % 2 == 0)
                    {
                        break;
                    }
                }

                while (true)
                {
                    x3 = r.Next(4, 41);
                    y3 = r.Next(5, 23);

                    if (x3 % 4 == 0 && y3 % 2 == 0)
                    {
                        break;
                    }
                }

                if (x == x1 || x == x2 || x == x3 || x1 == x2 || x1 == x3 || x2 == x3)
                {
                    if (y != y1 || y != y2 || y != y3 || y1 != y2 || y1 != y3 || y2 != y3)
                        break;
                    else
                        continue;
                }
                else if (y == y1 || y == y2 || y == y3 || y1 == y2 || y1 == y3 || y2 == y3)
                {
                    if (x != x1 || x != x2 || x != x3 || x1 != x2 || x1 != x3 || x2 != x3)
                        break;
                    else
                        continue;
                }
                else
                    break;

            }


            while (true)
            {
                Clear();
                i = 1;

                Write($"x : {i}번째 숫자를 입력해주세요 : ");
                num = int.Parse(ReadLine());
                px = fixednum + (num * 4);

                Write($"y : {i}번째 숫자를 입력해주세요 : ");
                num = int.Parse(ReadLine());
                py = fixednum1 + (num * 2);
                ++i;

                Write($"x : {i}번째 숫자를 입력해주세요 : ");
                num = int.Parse(ReadLine());
                px1 = fixednum + (num * 4);

                Write($"y : {i}번째 숫자를 입력해주세요 : ");
                num = int.Parse(ReadLine());
                py1 = fixednum1 + (num * 2);
                ++i;

                Write($"x : {i}번째 숫자를 입력해주세요 : ");
                num = int.Parse(ReadLine());
                px2 = fixednum + (num * 4);

                Write($"y : {i}번째 숫자를 입력해주세요 : ");
                num = int.Parse(ReadLine());
                py2 = fixednum1 + (num * 2);
                ++i;

                Write($"x : {i}번째 숫자를 입력해주세요 : ");
                num = int.Parse(ReadLine());
                px3 = fixednum + (num * 4);

                Write($"y : {i}번째 숫자를 입력해주세요 : ");
                num = int.Parse(ReadLine());
                py3 = fixednum1 + (num * 2);

                if (py == px1 || px == px2 || px == px3 || px1 == px2 || px1 == px3 || px2 == px3)
                {
                    if (py != py1 || py != py2 || py != py3 || py1 != py2 || py1 != py3 || py2 != py3)
                        break;
                    else
                        continue;
                }
                else if (py == py1 || py == py2 || py == py3 || py1 == py2 || py1 == py3 || py2 == py3)
                {
                    if (px != px1 || px != px2 || px != px3 || px1 != px2 || px1 != px3 || px2 != px3)
                        break;
                    else
                        continue;
                }
                else
                    break;
            }
            

            #endregion

            bool play = true;

            while (true)
            {
                Clear();

                screen.Comscreen();
                screen.Playerscreen();

                if (p)
                {
                    Obj(px, py, "♣");
                }
                if (p1)
                {
                    Obj(px1, py1, "♠");
                }
                if (p2)
                {
                    Obj(px2, py2, "♥");
                }
                if (p3)
                {
                    Obj(px3, py3, "◆");
                }

                if (c)
                {
                    Obj(x, y, "♣");
                }
                if (c1)
                {
                    Obj(x1, y1, "♠");
                }
                if (c2)
                {
                    Obj(x2, y2, "♥");
                }
                if (c3)
                {
                    Obj(x3, y3, "◆");
                }

                if (play)
                {
                    ForegroundColor = ConsoleColor.Blue;
                    Obj(mx, my, "■");

                    ForegroundColor = ConsoleColor.White;
                    key = ReadKey(true).Key;

                    switch (key)
                    {
                        case ConsoleKey.LeftArrow:
                            if (mx > 4) mx -= 4;
                            break;
                        case ConsoleKey.RightArrow:
                            if (mx < 40) mx += 4;
                            break;
                        case ConsoleKey.UpArrow:
                            if (my > 4) my -= 2;
                            break;
                        case ConsoleKey.DownArrow:
                            if (my < 22) my += 2;
                            break;
                        case ConsoleKey.Enter:
                            if (!c && mx == x && my == y)
                            {
                                Obj2(5, 25, mx, my, "player");
                                Sleep(1000);
                                play = false;
                            }
                            else if (!c1 && mx == x1 && my == y1)
                            {
                                Obj2(5, 25, mx, my, "player");
                                Sleep(1000);
                                play = false;
                            }
                            else if (!c2 && mx == x2 && my == y2)
                            {
                                Obj2(5, 25, mx, my, "player");
                                Sleep(1000);
                                play = false;
                            }
                            else if (!c3 && mx == x3 && my == y3)
                            {
                                Obj2(5, 25, mx, my, "player");
                                Sleep(1000);
                                play = false;
                            }
                            else if (mx == x && my == y)
                            {
                                c = false;
                                Obj3(5, 25, mx, my, "player");
                                Sleep(1000);
                                play = false;
                            }
                            else if (mx == x1 && my == y1)
                            {
                                c1 = false;
                                Obj3(5, 25, mx, my, "player");
                                Sleep(1000);
                                play = false;
                            }
                            else if (mx == x2 && my == y2)
                            {
                                c2 = false;
                                Obj3(5, 25, mx, my, "player");
                                Sleep(1000);
                                play = false;
                            }
                            else if (mx == x3 && my == y3)
                            {
                                c3 = false;
                                Obj3(5, 25, mx, my, "player");
                                Sleep(1000);
                                play = false;
                            }
                            else
                            {
                                Obj2(5, 25, mx, my, "player");
                                Sleep(1000);
                                play = false;
                            }

                           
                            break;

                    }
                }

                if (!play)
                {
                    int cx, cy, comx, comy;                    

                    cx = r.Next(1, 11);
                    cy = r.Next(1, 11);

                    comx = fixednum + (cx * 4);
                    comy = fixednum1 + (cy * 2);


                    Obj(comx, comy, "◎");

                    if (comx == px && comy == py)
                    {
                        p = false;
                        Obj3(55, 25, comx, comy, "com");
                        Sleep(1000);
                        play = true;
                    }
                    else if (comx == px1 && comy == py1)
                    {
                        p1 = false;
                        Obj3(55, 25, comx, comy, "com");
                        Sleep(1000);
                        play = true;
                    }
                    else if (comx == px2 && comy == py2)
                    {
                        p2 = false;
                        Obj3(55, 25, comx, comy, "com");
                        Sleep(1000);
                        play = true;
                    }
                    else if (comx == px3 && comy == py3)
                    {
                        p3 = false;
                        Obj3(55, 25, comx, comy, "com");
                        Sleep(1000);
                        play = true;
                    }
                    else
                    {
                        Obj2(55, 25, comx - fixednum, comy, "com");
                        Sleep(1000);
                        play = true;
                    }
                }

                if (!c1 && !c2 && !c3 && !c)
                {
                    SetCursorPosition(7, 25);
                    WriteLine("적의 위치를 전부 찾았습니다 Win");
                    break;
                }
                else if (!p && !p1 && !p2 && !p3)
                {
                    SetCursorPosition(7, 25);
                    WriteLine("적이 전함을 전부 찾았습니다 Drow");
                    break;
                }
                else
                    continue;

            }
        }
    }
    class Program
    {
        static void Main(string[] args)
        {
            ConsoleKey key;
            Tast tast = new Tast();
            Screen screen = new Screen();


            while (true)
            {
                screen.Earlyscreen();
                key = ReadKey(true).Key;
                switch (key)
                {
                    case ConsoleKey.Enter:
                        break;
                    default:
                        return;
                }

                tast.Game();

                key = ReadKey(true).Key;

                switch (key)
                {
                    case ConsoleKey.NumPad1:
                        continue;
                }
            }

        }
    }
}
